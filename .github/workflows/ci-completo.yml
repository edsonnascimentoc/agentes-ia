name: âœ… CI Completo â€” Estrutura, SeguranÃ§a e SimulaÃ§Ã£o

on:
  push:
    branches: [main, dev]
  pull_request:
    branches: [main, dev]

jobs:
  valida-agentes:
    name: ğŸ” Validar Estrutura e SeguranÃ§a
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v3

      - name: ğŸ Instalar Python e dependÃªncias
        run: |
          python -m pip install --upgrade pip
          pip install pytest jsonschema

      - name: âœ… Validar estrutura (JSON Schema)
        run: pytest tests/test_agentes.py

      - name: ğŸ›¡ï¸ Validar seguranÃ§a (tokens/dados sensÃ­veis)
        run: python compliance/valida_compliance_lote.py

      - name: ğŸ¯ Simular execuÃ§Ã£o de agentes
        run: pytest tests/test_simulador_agentes.py
